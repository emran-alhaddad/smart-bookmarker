<!DOCTYPE html>
<html>
<head>
  <title>Smart Bookmark Organizer ‚Äì Options</title>
  <meta charset="UTF-8">
  <style>
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; max-width: 700px; margin: 0 auto; padding: 20px; background: #f5f5f5; }
    .container { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    h1 { color: #333; margin-bottom: 30px; text-align: center; }
    .section { margin-bottom: 30px; padding: 20px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #4caf50; }
    .section h3 { margin-top: 0; color: #495057; }
    .form-group { margin-bottom: 20px; }
    label { display: block; margin-bottom: 8px; font-weight: 500; color: #495057; }
    input, select, textarea { width: 100%; padding: 10px; border: 1px solid #ced4da; border-radius: 4px; font-size: 14px; }
    input:focus, select:focus, textarea:focus { outline: none; border-color: #4caf50; box-shadow: 0 0 0 2px rgba(76,175,80,0.2); }
    .btn { background: linear-gradient(135deg, #4caf50, #45a049); color: white; border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500; transition: all 0.3s ease; }
    .btn:hover { background: linear-gradient(135deg, #45a049, #3d8b40); transform: translateY(-2px); box-shadow: 0 4px 12px rgba(76,175,80,0.3); }
    .btn.secondary { background: linear-gradient(135deg, #6c757d, #5a6268); }
    .btn.secondary:hover { background: linear-gradient(135deg, #5a6268, #495057); }
    .status { padding: 10px; border-radius: 4px; margin-top: 10px; display: none; }
    .status.success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
    .status.error { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
    .help-text { font-size: 12px; color: #6c757d; margin-top: 5px; }
    .category-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 10px; margin-top: 10px; }
    .category-item { display: flex; align-items: center; gap: 8px; padding: 8px; background: white; border: 1px solid #dee2e6; border-radius: 4px; }
    .category-color { width: 16px; height: 16px; border-radius: 50%; }
  </style>
</head>
<body>
  <div class="container">
    <h1>ü§ñ Smart Bookmark Organizer ‚Äì Settings</h1>
    <!-- AI Configuration -->
    <div class="section">
      <h3>AI Configuration</h3>
      <div class="form-group">
        <label for="classificationMode">Classification Mode</label>
        <select id="classificationMode">
          <option value="local">Local (offline)</option>
          <option value="api_auto">API ‚Äì Auto</option>
          <option value="api_openai">API ‚Äì OpenAI</option>
          <option value="api_gemini">API ‚Äì Gemini</option>
          <option value="api_claude">API ‚Äì Claude</option>
          <option value="api_uclassify">API ‚Äì uClassify</option>
        </select>
        <div class="help-text">Choose how bookmarks are categorized. Auto will try each API provider in order. If no API key is present or a call fails, it falls back to local.</div>
      </div>
      <div class="form-group">
        <label for="openaiKey">OpenAI API Key</label>
        <input type="password" id="openaiKey" placeholder="Enter OpenAI API key (optional)">
        <div class="help-text">Used for accurate classification via OpenAI. Leave blank to disable.</div>
      </div>
      <div class="form-group">
        <label for="geminiKey">Gemini API Key</label>
        <input type="password" id="geminiKey" placeholder="Enter Gemini API key (optional)">
        <div class="help-text">Used for classification via Google Gemini. Leave blank to disable.</div>
      </div>
      <div class="form-group">
        <label for="claudeKey">Claude API Key</label>
        <input type="password" id="claudeKey" placeholder="Enter Claude API key (optional)">
        <div class="help-text">Used for classification via Anthropic Claude. Leave blank to disable.</div>
      </div>
      <div class="form-group">
        <label for="uclassifyKey">uClassify API Key</label>
        <input type="password" id="uclassifyKey" placeholder="Enter uClassify API key (optional)">
        <div class="help-text">Used for classification via uClassify. Leave blank to disable.</div>
      </div>
      <div class="form-group">
        <label for="rateLimitDelay">Rate Limit Delay (ms)</label>
        <input type="number" id="rateLimitDelay" value="2000" min="500" max="10000">
        <div class="help-text">Delay between API calls. Increase to avoid hitting rate limits.</div>
      </div>
    </div>
    <!-- Organize Strategy -->
    <div class="section">
      <h3>Organize Strategy</h3>
      <label style="display:block;margin:6px 0;">
        <input type="radio" name="organizeStrategy" id="keepOriginals" value="clone" checked>
        Keep originals (clone into Smart Bookmarks)
      </label>
      <label style="display:block;margin:6px 0;">
        <input type="radio" name="organizeStrategy" id="moveOriginals" value="move">
        Move originals (re-file real bookmarks into Smart Bookmarks)
      </label>
      <p class="help-text">Default is ‚ÄúKeep originals‚Äù. You can change this anytime.</p>
    </div>

    <!-- Categories Management -->
    <div class="section">
      <h3>Categories</h3>
      <!-- List of existing categories -->
      <div id="userCategoriesList"></div>
      <!-- Row for adding a new category: slug is derived automatically from the name -->
      <div class="row" style="gap:8px; margin-top:12px">
        <input id="newCatName" placeholder="Name (e.g., Tools)" />
        <input id="newCatEmoji" placeholder="Emoji (e.g., üß∞)" />
        <select id="newCatParent"><option value="">No parent</option></select>
        <button id="addCategoryBtn" class="btn secondary" type="button">Add</button>
      </div>
      <div style="margin-top:12px; display:flex; gap:8px; flex-wrap:wrap">
        <button id="saveCategoriesBtn" class="btn" type="button">Save Changes</button>
      </div>
      <div class="help-text">Each category requires a unique slug derived from its name. Use emoji and name to customize. Use parent to create sub‚Äëcategories.</div>
    </div>

    <!-- Custom Keywords -->
    <div class="section">
      <h3>Custom Keywords for AI</h3>
      <textarea id="customCategories" rows="4" placeholder="Enter custom keywords, one per line"></textarea>
      <div class="help-text">Additional keywords that the AI should recognize when classifying pages. Keywords do not create new categories automatically.</div>
    </div>
    <!-- Backup & Restore -->
    <div class="section">
      <h3>Backup &amp; Restore</h3>
      <div class="form-group">
        <button id="exportBtn" class="btn secondary">Export Settings</button>
        <button id="importBtn" class="btn secondary">Import Settings</button>
        <input type="file" id="importFile" accept=".json" style="display:none;">
        <div class="help-text">Backup your settings and categories for migration or sharing.</div>
      </div>
    </div>
    <div class="form-group">
      <button id="saveBtn" class="btn">Save Settings</button>
      <button id="resetBtn" class="btn secondary">Reset to Defaults</button>
    </div>
    <div id="status" class="status"></div>
  </div>
  <script src="options.js"></script>
</body>
</html>